{"ast":null,"code":"import axios from 'axios';\nimport * as actions from '../actions/api';\nimport { EnhancedStore } from '@reduxjs/toolkit';\nimport { store } from '../store';\n\nconst api = store => next => async action => {\n  if (action.type !== actions.apiCallBegan.type) return next(action);\n  next(action);\n  const {\n    url,\n    method,\n    data,\n    onSuccess,\n    onError\n  } = action.payload;\n\n  try {\n    const responce = await axios.request({\n      baseURL: process.env.REACT_APP_API,\n      url,\n      method,\n      hheaders: {\n        Accept: 'application/json'\n      } //data,\n\n    });\n    store.dispatch(actions.apiCallSuccess(responce.data));\n    if (onSuccess) store.dispatch({\n      type: onSuccess,\n      payload: responce.data\n    });\n  } catch (error) {\n    store.dispatch(actions.apiCallFailed(error));\n    if (onError) store.dispatch({\n      type: onError,\n      payload: error\n    });\n  }\n};\n\nexport default api;","map":{"version":3,"sources":["C:/projects/video-hoster/frontend/src/store/middleware/api.js"],"names":["axios","actions","EnhancedStore","store","api","next","action","type","apiCallBegan","url","method","data","onSuccess","onError","payload","responce","request","baseURL","process","env","REACT_APP_API","hheaders","Accept","dispatch","apiCallSuccess","error","apiCallFailed"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,OAAZ,MAAyB,gBAAzB;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA,SAASC,KAAT,QAAsB,UAAtB;;AAEA,MAAMC,GAAG,GAAID,KAAD,IAAYE,IAAD,IAAU,MAAOC,MAAP,IAAkB;AACjD,MAAIA,MAAM,CAACC,IAAP,KAAgBN,OAAO,CAACO,YAAR,CAAqBD,IAAzC,EAA+C,OAAOF,IAAI,CAACC,MAAD,CAAX;AAE/CD,EAAAA,IAAI,CAACC,MAAD,CAAJ;AACA,QAAM;AAAEG,IAAAA,GAAF;AAAOC,IAAAA,MAAP;AAAeC,IAAAA,IAAf;AAAqBC,IAAAA,SAArB;AAAgCC,IAAAA;AAAhC,MAA4CP,MAAM,CAACQ,OAAzD;;AACA,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMf,KAAK,CAACgB,OAAN,CAAc;AACnCC,MAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,aADc;AAEnCX,MAAAA,GAFmC;AAGnCC,MAAAA,MAHmC;AAInCW,MAAAA,QAAQ,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAJyB,CAKnC;;AALmC,KAAd,CAAvB;AAOAnB,IAAAA,KAAK,CAACoB,QAAN,CAAetB,OAAO,CAACuB,cAAR,CAAuBT,QAAQ,CAACJ,IAAhC,CAAf;AACA,QAAIC,SAAJ,EAAeT,KAAK,CAACoB,QAAN,CAAe;AAAEhB,MAAAA,IAAI,EAAEK,SAAR;AAAmBE,MAAAA,OAAO,EAAEC,QAAQ,CAACJ;AAArC,KAAf;AAChB,GAVD,CAUE,OAAOc,KAAP,EAAc;AACdtB,IAAAA,KAAK,CAACoB,QAAN,CAAetB,OAAO,CAACyB,aAAR,CAAsBD,KAAtB,CAAf;AAEA,QAAIZ,OAAJ,EAAaV,KAAK,CAACoB,QAAN,CAAe;AAAEhB,MAAAA,IAAI,EAAEM,OAAR;AAAiBC,MAAAA,OAAO,EAAEW;AAA1B,KAAf;AACd;AACF,CApBD;;AAsBA,eAAerB,GAAf","sourcesContent":["import axios from 'axios'\r\nimport * as actions from '../actions/api'\r\nimport { EnhancedStore } from '@reduxjs/toolkit'\r\nimport { store } from '../store'\r\n\r\nconst api = (store) => (next) => async (action) => {\r\n  if (action.type !== actions.apiCallBegan.type) return next(action)\r\n\r\n  next(action)\r\n  const { url, method, data, onSuccess, onError } = action.payload\r\n  try {\r\n    const responce = await axios.request({\r\n      baseURL: process.env.REACT_APP_API,\r\n      url,\r\n      method,\r\n      hheaders: { Accept: 'application/json' },\r\n      //data,\r\n    })\r\n    store.dispatch(actions.apiCallSuccess(responce.data))\r\n    if (onSuccess) store.dispatch({ type: onSuccess, payload: responce.data })\r\n  } catch (error) {\r\n    store.dispatch(actions.apiCallFailed(error))\r\n\r\n    if (onError) store.dispatch({ type: onError, payload: error })\r\n  }\r\n}\r\n\r\nexport default api\r\n"]},"metadata":{},"sourceType":"module"}